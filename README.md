# nbsd_devenv_setup_script

## 概要

NetBSDのカーネル開発環境のセットアップを行うスクリプトです。

## 開発環境の例

以下のようなカーネル開発用・テスト用にマシン(VM)を分けた環境向けの細々とした設定を行います。

```
   --+-----------------------+----- LAN
     |                       |
   +-+----------------+    +-+------------------+
   |    advcal2016    |    |   advcal2016test   |
   | (カーネル開発用) |    | (カーネルテスト用) |
   +-+----------------+    +-+------------------+
     |172.16.0.43            |172.16.0.42
   --+-----------------------+--------------- 172.16.0.0/24
```

## 事前の設定

ネットワークの設定を済ませておいてください。
例えば、`/etc/rc.conf`に以下の設定を行うことで起動時にDHCPによるIPアドレス取得が行えます。

```
dhclient=YES
dhclient_flags="wm0"
```

このリポジトリを開発・テスト用環境に`scp`等で配置してください。

## 使い方

### 最低限必要なパッケージのインストール

スクリプト実行にbashが必要なのと、カーネスソースコードのダウンロードのためcurlを使用しています。これらのコマンドをインストールするため、最初に`bootstrap.sh`を実行してください。

```
# ./bootstrap.sh
```

### カーネル開発環境で実行するスクリプト

カーネル開発環境(上記の例における「カーネル開発用」マシン)では`setup_remote_host.sh`を実行してください。

```
# ./script/setup_remote_host.sh
```

### カーネルテスト環境で実行するスクリプト

カーネルテスト環境(上記の例における「カーネルテスト用」マシン)では`setup_remote_host.sh`を実行してください。

```
# ./script/setup_target_host.sh
```

